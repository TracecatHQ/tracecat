[containers]
# No default capabilities
default_capabilities = []
default_sysctls = []
# Secure volume mounts by default
default_mount_options = ["nodev", "nosuid", "noexec"]
# Prevent privilege escalation
no_new_privileges = true

# Resource limits
pids_limit = 100
memory_limit = "512m"
memory_swap = "512m"
cpu_period = 100000
cpu_quota = 50000  # 50% CPU limit

[engine]
runtime = "crun"
# Enable rootless mode
userns_mode = "auto"
cgroup_manager = "cgroupfs"
# Enable automatic volume cleanup
volume_cleanup = "true"
# Set events logger
events_logger = "file"
# Set network backend
network_backend = "netavark"

# Timeout settings
stop_timeout = 30
http_timeout = 300

[engine.runtimes]
crun = [
  "/usr/bin/crun",
]

[network]
# Configure network settings for rootless mode
network_backend = "netavark"
cni_plugin_dirs = [
  "/usr/lib/cni"
]
