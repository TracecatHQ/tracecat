---
title: AWS ECS Fargate
description: Deploy Tracecat to AWS ECS Fargate using the in-repo Terraform stack.
icon: aws
---

<Warning>
  This stack supports Tracecat `>1.0.0-beta.xx` and is not backward compatible with pre-1.0 executor modes.
  Default `auth_types` is `saml`, so configure SAML before first login.
</Warning>

## Prerequisites

- [Terraform](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli)
- AWS credentials configured for your target account/role
- A public Route53 hosted zone (domain + hosted zone ID)
- `openssl` and AWS CLI (if using the helper secret script)

<Note>
The stack deploys a public ALB with private ECS/RDS/Redis networking and creates three blob buckets:
attachments, registry, and workflow artifacts.
</Note>

## Instructions

<Steps>
  <Step title="Open the Terraform stack">
    Use the stack in this repository:

    ```bash
    cd deployments/fargate
    ```
  </Step>

  <Step title="Create core Tracecat secrets">
    Create required secrets (`TRACECAT__DB_ENCRYPTION_KEY`, `TRACECAT__SERVICE_KEY`, `TRACECAT__SIGNING_SECRET`):

    ```bash
    export AWS_DEFAULT_REGION=<aws-region>
    ./scripts/create-aws-secrets.sh
    ```

    Keep the resulting secret ARNs for Terraform variables.
  </Step>

  <Step title="Configure auth secrets (optional)">
    Depending on your auth mode, optionally provide:

    - OAuth: `oauth_client_id_arn`, `oauth_client_secret_arn`
    - OIDC: `oidc_issuer`, `oidc_scopes`, `oidc_client_id_arn`, `oidc_client_secret_arn`
    - SAML: `saml_idp_metadata_url_arn`, `saml_ca_certs_arn`, `saml_metadata_cert_arn`
    - User auth tokens: `user_auth_secret_arn`
  </Step>

  <Step title="Initialize and deploy">
    ```bash
    terraform init

    export TF_VAR_aws_region=<aws-region>
    export TF_VAR_domain_name=<domain>
    export TF_VAR_hosted_zone_id=<hosted-zone-id>

    export TF_VAR_tracecat_db_encryption_key_arn=<secret-arn>
    export TF_VAR_tracecat_service_key_arn=<secret-arn>
    export TF_VAR_tracecat_signing_secret_arn=<secret-arn>

    # Optional but recommended
    export TF_VAR_tracecat_image_tag=1.0.0-beta.6

    terraform apply
    ```

    Provisioning may take ~10-20 minutes due to RDS and ECS startup.
  </Step>

  <Step title="Access Tracecat">
    - App: `https://<domain>`
    - API docs: `https://<domain>/api/docs`
  </Step>
</Steps>

## Notes

- API runs migrations at startup in this stack.
- ECS runtime includes `executor` and `agent-executor` services.
- Workflow artifact retention is controlled by `workflow_artifact_retention_days`.

## Reference

- Variables: [`deployments/fargate/variables.tf`](https://github.com/TracecatHQ/tracecat/blob/main/deployments/fargate/variables.tf)
- Stack README: [`deployments/fargate/README.md`](https://github.com/TracecatHQ/tracecat/blob/main/deployments/fargate/README.md)
